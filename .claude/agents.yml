# Agent Definitions
# Defines specialized agents for different tasks in the Machinist Shopify Theme

agents:
  # Initialization agent - sets up environment and project structure
  - name: "init"
    type: "initialization"
    description: "Initializes the environment and creates necessary files and directories"
    config_file: ".claude/agents/init-agent.md"
    capabilities:
      - "Create project structure"
      - "Initialize configuration files"
      - "Set up documentation"
      - "Validate project setup"
    tools:
      - "file_operations"
      - "documentation"
      - "validation"

  # Development agent - handles code implementation tasks
  - name: "dev"
    type: "development"
    description: "Handles code implementation and feature development"
    capabilities:
      - "Implement Shopify sections"
      - "Create Liquid templates"
      - "Write JavaScript components"
      - "Style with CSS"
      - "Follow theme patterns"
    tools:
      - "code_editing"
      - "liquid_templating"
      - "web_components"
      - "css_styling"
      - "shopify_api"
    context:
      - "CLAUDE.md"
      - "sections/"
      - "templates/"
      - "assets/"
      - "snippets/"

  # Testing agent - creates and runs property tests
  - name: "test"
    type: "testing"
    description: "Creates property-based tests and validates implementation"
    capabilities:
      - "Write property tests"
      - "Create test scenarios"
      - "Validate requirements"
      - "Run test suites"
    tools:
      - "vitest"
      - "fast-check"
      - "test_runner"
    config_file: ".claude/property-test-agents.yml"

  # Documentation agent - maintains project documentation
  - name: "docs"
    type: "documentation"
    description: "Creates and maintains project documentation"
    capabilities:
      - "Update CLAUDE.md"
      - "Generate API docs"
      - "Write implementation guides"
      - "Create diagrams"
    tools:
      - "markdown"
      - "mermaid"
      - "documentation"
    output_dir: ".claude/docs"

  # Review agent - code review and quality assurance
  - name: "review"
    type: "quality_assurance"
    description: "Reviews code for quality, patterns, and best practices"
    capabilities:
      - "Code review"
      - "Pattern validation"
      - "Security checks"
      - "Performance analysis"
      - "Accessibility audit"
    tools:
      - "linting"
      - "static_analysis"
      - "pattern_matching"
    context:
      - "CLAUDE.md"

  # Shopify agent - Shopify-specific operations
  - name: "shopify"
    type: "shopify_operations"
    description: "Handles Shopify-specific operations and API interactions"
    capabilities:
      - "Theme deployment"
      - "Product catalog management"
      - "Metafield operations"
      - "Admin API operations"
    tools:
      - "shopify_cli"
      - "admin_api"
      - "storefront_api"
    commands:
      dev: "pnpm dev"
      push: "pnpm push"
      pull: "pnpm pull"
      check: "pnpm check"

# Agent coordination rules
coordination:
  # Define which agents can spawn sub-agents
  hierarchy:
    init:
      can_spawn: ["dev", "docs", "review"]
    dev:
      can_spawn: ["test", "review"]
    test:
      can_spawn: []
    docs:
      can_spawn: []
    review:
      can_spawn: []
    shopify:
      can_spawn: ["dev"]

  # Define communication patterns between agents
  communication:
    - from: "dev"
      to: "test"
      protocol: "task_completion"
    - from: "test"
      to: "dev"
      protocol: "test_results"
    - from: "dev"
      to: "docs"
      protocol: "documentation_update"
    - from: "review"
      to: "dev"
      protocol: "review_feedback"

# Shared context available to all agents
shared_context:
  - "CLAUDE.md"
  - "README.md"
  - ".claude/config.yml"
  - ".claude/tasks.yml"
