{% comment %}
  MACHINIST THEME: Customer Account Section
{% endcomment %}

<section class="account" data-section-id="{{ section.id }}">
  <div class="account__header">
    <h1 class="account__title txt-heading">{{ 'customer.account.title' | t }}</h1>
    <a href="{{ routes.account_logout_url }}" class="btn btn--secondary">
      <span class="btn__text">{{ 'customer.log_out' | t }}</span>
    </a>
  </div>

  <div class="account__content">
    <div class="account__orders">
      <h2 class="account__section-title txt-heading">{{ 'customer.orders.title' | t }}</h2>
      
      {%- if customer.orders.size > 0 -%}
        <table class="account__table">
          <thead class="txt-mono">
            <tr>
              <th>{{ 'customer.orders.order_number' | t }}</th>
              <th>{{ 'customer.orders.date' | t }}</th>
              <th>{{ 'customer.orders.payment_status' | t }}</th>
              <th>{{ 'customer.orders.fulfillment_status' | t }}</th>
              <th>{{ 'customer.orders.total' | t }}</th>
            </tr>
          </thead>
          <tbody>
            {%- for order in customer.orders -%}
              <tr>
                <td>
                  <a href="{{ order.customer_url }}" class="txt-accent">
                    {{ order.name }}
                  </a>
                </td>
                <td>{{ order.created_at | date: '%Y-%m-%d' }}</td>
                <td>{{ order.financial_status_label }}</td>
                <td>{{ order.fulfillment_status_label }}</td>
                <td class="txt-mono">{{ order.total_price | money }}</td>
              </tr>
            {%- endfor -%}
          </tbody>
        </table>
      {%- else -%}
        <p class="txt-body">{{ 'customer.orders.none' | t }}</p>
      {%- endif -%}
    </div>

    <div class="account__details">
      <h2 class="account__section-title txt-heading">{{ 'customer.account.details' | t }}</h2>
      <div class="account__info txt-body">
        <p>{{ customer.name }}</p>
        <p>{{ customer.email }}</p>
      </div>
      <a href="{{ routes.account_addresses_url }}" class="txt-mono txt-accent">
        {{ 'customer.account.view_addresses' | t }} &rarr;
      </a>
    </div>
  </div>
</section>

<style>
  .account__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--pad);
    border-bottom: 2px solid var(--c-border);
  }

  .account__title {
    font-size: 4rem;
  }

  .account__content {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: var(--grid-gap);
    background: var(--c-border);
  }

  .account__orders,
  .account__details {
    background: var(--c-bg);
    padding: var(--pad);
  }

  .account__section-title {
    font-size: 2rem;
    margin-bottom: 2rem;
    color: var(--c-accent);
  }

  .account__table {
    width: 100%;
    border-collapse: collapse;
  }

  .account__table th,
  .account__table td {
    padding: 1rem;
    text-align: left;
    border-bottom: 1px solid var(--c-border);
  }

  .account__table th {
    font-size: 1.2rem;
    color: var(--c-accent);
  }

  .account__info p {
    margin-bottom: 0.5rem;
  }

  @media (max-width: 1024px) {
    .account__content {
      grid-template-columns: 1fr;
    }
  }
</style>

{% schema %}
{
  "name": "Customer account",
  "tag": "section",
  "class": "section-account"
}
{% endschema %}
